
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles{
    @Styles.Render("~/Content/Permission")
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a class="actionLinkBreadcrumb" href="/Home/Index">Sistema</a>
        </li>
        <li class="breadcrumb-item">
            <a class="actionLinkBreadcrumb" href="/Permission/Index">Permisos</a>
        </li>
        <li class="breadcrumb-item active">Index</li>
    </ol>
</nav>

<div class="card">
    <div class="card-header">
        <h3 class="d-flex justify-content-center" style="margin: 0;">
            <i class="fas fa-key"></i>
            <b>Permisos</b>
        </h3>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col">
                <div class="form-group">
                    <select class="form-control" id="slctRols" onchange="LoadPermissions()">
                        @foreach (var item in ViewBag.Rols)
                        {
                            <option value="@item.Id">@item.Name</option>
                        }
                    </select>
                </div>
            </div>
        </div>

        <br />

        <div class="row" id="trans" hidden>
            <div class="col-sm-12 text-center">
                <img src="~/Resources/img/" style="width:80px; height:60px;" />
                <a href="#" id="transact"> Por favor espere...</a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4 table-responsive" style="height: 500px; overflow-y: auto;">
                <h6>Menús</h6>
                <table class="table table-hover table-bordered" id="tblMenus">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Nombre</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="col-md-4">
                <div class="col">
                    <button class="btn btn-block" id="btnAsignar" onclick="AddPermission()"
                            style="background-color: #66A5AD; color: white;">
                        Asignar<i id="iAgregar" class="fa fa-arrow-right" aria-hidden="true" style="padding-left: 5%;"></i>
                    </button>
                </div>
                <br />
                <div class="col">
                    <button class="btn btn-block" id="btnQuitar" onclick="QuitPermission()"
                            style="background-color: #003B46; color: white;">
                        <i id="iQuitar" class="fa fa-arrow-left" aria-hidden="true" style="padding-right: 5%;"></i>Quitar
                    </button>
                </div>
            </div>

            <div class="col-md-4 table-responsive" style="height: 500px; overflow-y: auto;">
                <h6>Permisos</h6>
                <table class="table table-hover table-bordered table-sm" id="tblPermission">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>MenuId</th>
                            <th>Nombre</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card-footer small text-muted">
        Actualizado @DateTime.Now
    </div>
</div>

<!-- Salto para que quede ordenado con el footer -->
<br />

@section Scripts{
    @Scripts.Render("~/Scripts/Permission")
}